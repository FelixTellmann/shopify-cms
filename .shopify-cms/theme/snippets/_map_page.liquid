{%- if no_metafields -%}
  {%- if input_page -%}
    {
    "author": {{ input_page.author | json }},
    "content": {{ input_page.content | json }},
    "handle": {{ input_page.handle | json }},
    "id": {{ input_page.id | json }},
    "published_at": "{{ input_page.published_at | date: "%Y-%m-%dT%H:%M:%S%z" }}",
    "template_suffix": {{ input_page.template_suffix | json }},
    "title": {{ input_page.title | json }},
    "url": {{ input_page.url | json }}
    }
  {%- else -%}
    null
  {%- endif -%}
{%- else -%}
  {%- if input_page -%}
    {
    "author": {{ input_page.author | json }},
    "content": {{ input_page.content | json }},
    "handle": {{ input_page.handle | json }},
    "id": {{ input_page.id | json }},
    "metafields": {%- include '_map_metafields', metafields: input_page.metafields.data -%},
    "published_at": "{{ input_page.published_at | date: "%Y-%m-%dT%H:%M:%S%z" }}",
    "template_suffix": {{ input_page.template_suffix | json }},
    "title": {{ input_page.title | json }},
    "url": {{ input_page.url | json }}
    }
  {%- else -%}
    null
  {%- endif -%}
{%- endif -%}
